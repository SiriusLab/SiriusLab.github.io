<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">

<title>Breathe life into your designer!</title>

<meta name="description" content="Breathe life into your designer!">
<meta name="author" content="Cédric Brun and Benoit Combemale">

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

<link rel="stylesheet" href="css/reveal.css">
<link rel="stylesheet" href="css/theme/black.css" id="theme">

<!-- Code syntax highlighting -->
<link rel="stylesheet" href="lib/css/zenburn.css">

<!-- Printing and PDF exports -->
<script>
	var link = document.createElement('link');
	link.rel = 'stylesheet';
	link.type = 'text/css';
	link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css'
			: 'css/print/paper.css';
	document.getElementsByTagName('head')[0].appendChild(link);
</script>

<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
</head>

<body>

	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">
			<section>
				<h1>Breathe life into your designer!</h1>
				<h3>with Sirius and GEMOC</h3>
				<p>
					<small><a href="http://cedric.brun.io/">Cédric Brun</a>, OBEO (<a href="http://twitter.com/bruncedric">@bruncedric</a>)</small><br /> <small><a href="http://people.irisa.fr/Benoit.Combemale/">Benoit Combemale</a>, INRIA and Univ. Rennes 1 (<a href="http://twitter.com/bcombemale">@bcombemale</a>)</small>
				</p>
				<p>
					<small>Slides available at http://siriuslab.github.io/talks/BreatheLifeInYourDesigner/slides</small>
				</p>

			</section>


			<section>
				<section>
					<h2>
						(Domain-Specific)<br />Behavioral Models
					</h2>
					<img src="./pics/behavioralmodel.jpg" width="300px" alt="Behavioral Models" />
					<p>Business Processes, Orchestrations, Functional chains, Activities, Protocoles, Scenarios...</p>
				</section>

				<section>
					<h2>Analysis of Behavioral Models</h2>
					<ul>
						<li>Early V&V or impact analysis of behavioral properties</li>
						<li>Software engineering, systems engineering, enterprise architecture, scientific modeling...</li>
					</ul>
				</section>

				<section>
					<h2>Model Debugging</h2>
					<ul>
						<li>Traversing step forward the states reached by the model through the application of the interpreter</li>
						<li>Intuitive model comprehension technique</li>
						<small><ul>
								<li>No abstraction gap</li>
								<li>Better turn-arounds</li>
							</ul></small>
						<li>&Implies; Fast convergence towards an acceptable design</li>
					</ul>
				</section>

				<section>
					<h2>Omniscient Model Debugging</h2>
					<ul>
						<li>Relies on an execution trace to revert the executed model into a prior state</li>
						<li>Forward/backward navigation into the execution trace</li>
						<small><ul>
								<li>No record & replay</li>
								<li>(similar) Replay</li>
							</ul></small>
					</ul>
				</section>

				<section>
					<h2>
						Omniscient Debugging of Activity Diagrams
						<h2>
							<img src="./pics/modelingworkbench.jpg" size="500px" alt="Debugger for Activity Diagrams" />
							<p>
								<small>See <a href="http://gemoc.org/ttc15">http://gemoc.org/ttc15</a></small>
							</p>
				</section>

				<section data-background="pics/gif/Screencast-activitydiagram-plainK3-run_and_step.gif"></section>

				<!-- <section>
<h2>Required Tools</h2>
<ul>
<li>Interpreter: step-by-step virtual machine for a given DSL</li>
<li>Animator: (graphical) representation of the execution state for a given DSL (either by extension of the editor representation, or with a new representation)</li>
<li>Trace manager: efficient and rich execution trace manipulation</li>
<li>Execution engine: coordinate the first 3 tools</li>
<li>Control panel: UI to control the execution engine (incl. step forward/backward, breakpoint) and navigate through the execution trace with a timeline</li>
</ul>
</section>
-->

				<section>
					<h2>
						Required Tools
						<h2>
							<img src="./pics/executableDSL-tools1b.png" alt="Required Tools" />
				</section>
				<!--<section data-background="./pics/executableDSL-tools1.png">
					</section>-->

			</section>

			<section>

				<section>
					<h2>
						How to get your own<br />(domain-specific) debugger?
					</h2>
				</section>

				<section>
					<h2>
						Required Developments
						<h2>
							<img src="./pics/executableDSL-tools2b.png" alt="Required Developments" />
				</section>
				
				

				
				
				<!--<section data-background="./pics/executableDSL-tools2.png">
					</section>-->

				<!--
					<section>
						<h2>Required developments for each DSL<h2>
						<img src="./pics/executableDSL-debug.png" alt="Required developments for each DSL" />
					</section>
					
					<section data-background="./pics/executableDSL.png">
					</section>
					-->

				<section>
					<h2>Proposed Approach: Wrap-up</h2>
					<ul>
						<li>Xtend/Kermeta or Java to define the interpreter</li>
						<li>Sirius Animation to define the animator</li>
						<li class="fragment roll-in">A generative approach for the trace manager</li>
						<li class="fragment roll-in">A generic execution engine</li>
						<li class="fragment roll-in">A generic control panel and timeline</li>
					</ul>
				</section>

				<!--<section>
						<h2>Alternatives and Tradeoff</h2>
						<p>
						TODO
						</p>
					</section>-->

			</section>

			<section>

				<section>
					<h2>Animating Arduino Designer</h2>
					<img alt="" src="pics/arduino-splash.png">
				</section>

				<section>
					<h2>a simple Eclipse Based tooling</h2>
					<img alt="" src="pics/arduino-screenshot.png">
				</section>

				<!-- 
				<section>
					<h2>Based on EMF and Sirius</h2>
					<img alt="" src="pics/arduino-archi.png">
				</section>
 -->

				<section>
					<img alt="" src="pics/arduino-ecore.png">
				</section>

				<section>
					<h2>Arduino Simulator</h2>
					<ul>
						<li class="fragment roll-in"><b>2</b> new plugins :
							<ul>

								<li>fr.obeo.dsl.arduino.simulator</li>
								<li>fr.obeo.dsl.arduino.simulator.design</li>
							</ul></li>
						<li class="fragment roll-in"><pre>
								<code>
------------------------------------------------------------
Language  files    blank        comment           code
------------------------------------------------------------
Java        14      229            318           1185
XML          5        0              0            329
Maven        2       12             18             54
------------------------------------------------------------
SUM:        21      241            336           1568
------------------------------------------------------------
						
						</code>
							</pre></li>
					</ul>
				</section>

				<section>
					<h2>Interpreter</h2>
					<small><pre>
							<code>
public class LoopSwitch extends ArduinoSwitch  {
//...
	
@Override
public Object caseSensor(Sensor sensor) {
	final Pin pin = ArduinoUtils.getPin(simulator.getProject(),
			sensor.getModule());
	return interpretObjectValueToBoolean(simulator.getPinLevel(pin));
}

@Override
public Object caseRepeat(Repeat repeat) {
	final Instruction first = repeat.getInstructions().get(0);
	for (int i = 0; i < repeat.getIteration(); ++i) {
		Instruction current = first;
		while (current != null) {
			doSwitch(current);
			current = current.getNext();
		}
	}
	return null;
}

// ...			 
 }
</code>
</pre></small>
				</section>

				<section>
					<h2>Execution Engine</h2>
					<small><pre>
							<code class="java" data-trim>
public class SimulatorDebugger extends AbstractDSLDebugger {
//...
public void start() {
	new Thread(new Runnable() {

		public void run() {
			spawnRunningThread(Thread.currentThread().getName(),
					simulator.getProject());
			simulator.init();
			simulator.loop();
		}
	}, "Arduino Simulator").start();
}

public void updateData(String threadName, EObject instruction) {
	if (!hardwareFramePushed) {
		pushStackFrame(Thread.currentThread().getName(), simulator
				.getProject().getHardware().getName(), simulator
				.getProject().getHardware(), instruction);
		hardwareFramePushed = true;
	} else {
		setCurrentInstruction(Thread.currentThread().getName(), instruction);
	}
	for (Entry&lt;Variable, Object&gt; entry : nextSuspendVariables.entrySet()) {
		variable(threadName,
				simulator.getProject().getHardware().getName(), &quot;variable&quot;,
				entry.getKey().getName(), entry.getValue(), true);
	}
	if (!nextSuspendVariables.isEmpty()) {
		lastSuspendVariables = nextSuspendVariables;
		nextSuspendVariables = new HashMap&lt;Variable, Object&gt;();
	}
	for (Entry&lt;Pin, Integer&gt; entry : nextSuspendPins.entrySet()) {
		variable(threadName,
				simulator.getProject().getHardware().getName(), &quot;pin&quot;,
				String.valueOf(entry.getKey().getId()), entry.getValue(),
				true);
	}
	if (!nextSuspendPins.isEmpty()) {
		lastSuspendPins = nextSuspendPins;
		nextSuspendPins = new HashMap&lt;Pin, Integer&gt;();
	}
}

// ...			 
 }
</code>
</pre></small>
				</section>


				<section>
					<h2>Animator</h2>
					<ul>
						<li class="fragment fade-in">simulator.odesign customizing arduino.odesign <img alt="" src="pics/vsm-extension-expanded.png">
						</li>
					</ul>
				</section>


				<section>
					<h2>Animator (2)</h2>
					<ul>
						<li class="fragment fade-in">Contributing actions
							<p>
								<img alt="" src="pics/vsm-extension-tools.png">
							</p>
						</li>
						<li class="fragment fade-in">Adapting style
							<p>
								<img alt="" src="pics/vsm-extension-style.png">
							</p>
						</li>
					</ul>
				</section>

				<section>
					<h2>Leverage the Sirius Animation runtime</h2>
					<ul>
						<li class="fragment roll-in">Encapsulate step over/into/return in transactions</li>
						<li class="fragment roll-in">Bridge the Eclipse Debug APIs and the EMF APIs</li>
						<li class="fragment roll-in">Transmit events and requests</li>
						<li class="fragment roll-in">Initialize the tooling extension</li>
						<li class="fragment roll-in">Provide off-the-shelf ecore model for runtime data</li>
					</ul>
				</section>


				<section>
					<h2>Ecore model for Runtime data</h2>
					<img alt="" src="pics/debug-ecore.png">
				</section>


				<section>
					<h2>Launch Configurations</h2>
					<img alt="" src="pics/arduino-launch-config.png">
				</section>


				<section data-background="pics/arduino-cat-buble.png">
					<h2>Demo</h2>
					<h2 class="fragment fade-in">... with no cat</h2>
				</section>



				<!--
				<section>
					<h2>Try it !</h2>
					<img alt="" src="pics/arduino-download.png">
				</section>

-->
				<section>
					<img alt="" src="pics/gif/arduino-running.gif">
				</section>


			</section>
	
<!--
				<section>
					<h2>Animating Activity Diagrams</h2>
				</section>



				<section>
					<h2>
						Interpreter<br />(runtime data)
					</h2>
					<small><pre>
							<code>
@Aspect(className=ActivityNode)
class ActivityNodeAspect {
	List&lt;Token&gt; heldTokens = new ArrayList&lt;Token&gt;
}

abstract class Token {
	public ActivityNode holder
}

class ForkedToken extends Token {
	public Token baseToken ;
	public Integer remainingOffersCount;
}
//...
</code>
</pre></small>
				</section>

				<section>
					<h2>
						Interpreter<br />(computational steps)
					</h2>
					<small><pre>
							<code>
@Aspect(className=Activity)
class ActivityAspect {

    def void execute(Context c) {
        _self.locals.forEach[v|v.init(c)]
        _self.nodes.filter[node|node instanceof InitialNode].get(0).execute(c)
		
        var list =  _self.nodes.filter[node|node.hasOffers]
        while (list!=null && list.size>0 ){
            list.get(0).execute(c)
            list =  _self.nodes.filter[node|node.hasOffers]	
        }
    }
}
//...
</code>
</pre></small>
				</section>


				<section>
					<h3>Additional capabilities "for free"</h3>
					<ul>
						<li>Definition of the animator with Sirius Animation</li>
						<li>Use of the generic execution engine</li>
						<li>Use of the generic trace manager</li>
						<li>Use of the control panel, timeline and breakpoint manager</li>
					</ul>
				</section>
  -->

			<section>



				<section data-background="#ffffff">
					<h2>GEMOC</h2>
					<ul>
						<li class="fragment fade-in">The GEMOC ANR project (<a href="http://gemoc.org/ins">http://gemoc.org/ins</a>):
							<p>
								<q style="color: gray;" cite="http://gemoc.org"> A Language Workbench for concurrent execution and simulation of heterogeneous models </q>
							</p>
						</li>
						<li class="fragment fade-in">The GEMOC Initiative (<a href="http://gemoc.org/">http://gemoc.org/</a>):
							<p>
								<q style="color: gray;" cite="http://gemoc.org">GEMOC is an open international initiative that aims to coordinate and disseminate the research results regarding the support of the coordinated use of various modeling languages that will lead to the concept of globalization of modeling
									languages, that is, the use of multiple modeling languages to support coordinated development of diverse aspects of a system.</q>
							</p>
						</li>
					</ul>

				</section>

				<section data-background="pics/gemoc-initiative-map.png" style="color: gray;">
					<p></p>
				</section>

				<section>
					<h2>GEMOC Technologies</h2>

					<ul>
						<li>Ready for pilote project:
							<ul>
								<small><li>Sirius Animation (animator designer and runtime, execution engine, trace manager)</li></small>
							</ul>
						</li>
						<li>Ready for more R&D:
							<ul>

								<small><li>MoccML and Timesquare for explicit concurrency specification in DSLs</li></small>
								<small><li>BCOoL for coordination patterns between DSLs</li></small>
							</ul>
						</li>
					</ul>
				</section>


				<section data-background="pics/lab.jpg">
					<h2 style="color: white; text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">Introducing Sirius Lab</h2>
					<!-- Page sur Sirius -->

				</section>

				<section>
						<b>Generic</b> technologies (EPL) which have proven helpful and are looking for an interest to bring it at full maturity level.
					<img alt="" src="pics/sirius-lab-web.png">
				</section>


				<section>
					<h2>in a Nutshell...</h2>
					<ul>
						<li class="fragment fade-in">POJO Animator (case of Arduino Designer) <small><ul>
									<li>Code the Interpreter, the Execution Engine and possibly any additional tools</li>
									<li><i>quick results, easy to integrate, very few (or custom) execution control.</i></li>
								</ul></small>
						</li>
						<br />
						<li class="fragment fade-in">Advanced Animator (case of Activity Diagram) <small><ul>
									<li>Code the Interpreter and use the generic Execution Engine and Trace manager</li>
									<li><i>more analysis capabilities (concurrency) and rich execution control (panel, timeline...)</i></li>
								</ul></small>
						</li>
					</ul>
				</section>

				<section style="text-align: left;">
					<h1>TO BE CONTINUED...</h1>
					<p>
						- <a href="">Try executable Arduino Designer</a> <small>0.1.x</small><br> - Read the <a href="http://gemoc.org/publications/">GEMOC Publications</a> <br> - <a href="https://github.com/hakimel/reveal.js">Join the GEMOC Initiative</a> <br> - <a href="">Get in touch with us</a> to
						breath life into your designer
					</p>
				</section>

				<section data-background="pics/evaluation.png"></section>
			</section>
		</div>

	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// Full list of configuration options available at:
		// https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			controls : true,
			progress : true,
			history : true,
			center : true,

			transition : 'slide', // none/fade/slide/convex/concave/zoom

			// Optional reveal.js plugins
			dependencies : [ {
				src : 'lib/js/classList.js',
				condition : function() {
					return !document.body.classList;
				}
			}, {
				src : 'plugin/markdown/marked.js',
				condition : function() {
					return !!document.querySelector('[data-markdown]');
				}
			}, {
				src : 'plugin/markdown/markdown.js',
				condition : function() {
					return !!document.querySelector('[data-markdown]');
				}
			}, {
				src : 'plugin/highlight/highlight.js',
				async : true,
				condition : function() {
					return !!document.querySelector('pre code');
				},
				callback : function() {
					hljs.initHighlightingOnLoad();
				}
			}, {
				src : 'plugin/zoom-js/zoom.js',
				async : true
			}, {
				src : 'plugin/notes/notes.js',
				async : true
			} ]
		});
	</script>

</body>
</html>
